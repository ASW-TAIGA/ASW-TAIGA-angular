<div class="issues-container flex h-screen overflow-hidden">

  <div class="issue-main-content flex-grow overflow-y-auto">
    <ng-container *ngIf="currentIssue$ | async as issue; else noIssueSelectedInDetail">
      <app-issue-detail
        [issue]="issue"
        [currentUser]="currentUserInput"
        [canGoPrevious]="canGoPrevious"
        [canGoNext]="canGoNext"
        (issuePropertyChange)="handleIssueUpdate($event)"
        (navigateToPrevious)="onNavigateToPreviousRequestedFromDetail()"
        (navigateToNext)="onNavigateToNextRequestedFromDetail()">
      </app-issue-detail>
    </ng-container>
    <ng-template #noIssueSelectedInDetail>
      <div class="p-6 text-center text-gray-500 italic h-full flex items-center justify-center">
        <p>Loading issue details or no issue to display...</p>
      </div>
    </ng-template>
  </div>

  <div class="sidebar-wrapper w-[416px] flex-shrink-0 border-l border-gray-200 h-full overflow-y-auto sticky top-0">
    <ng-container *ngIf="(currentIssue$ | async) as issue">
      <ng-container *ngIf="(issueOptions$ | async) as options">
        <app-issue-sidebar
          *ngIf="issue && options && currentUserInput && allProjectUsersInput.length > 0" [issue]="issue"
          [typeOptions]="options.typeOptions"
          [severityOptions]="options.severityOptions"
          [priorityOptions]="options.priorityOptions"
          [statusOptions]="options.statusOptions"
          [currentUser]="currentUserInput"
          [allProjectUsers]="allProjectUsersInput"
          (issuePropertyChange)="handleIssueUpdate($event)"
          (deleteIssueInitiated)="handleDeleteIssue($event)">
        </app-issue-sidebar>
      </ng-container>
    </ng-container>

    <div *ngIf="!(currentIssue$ | async) || !currentUserInput" class="p-6 text-center text-gray-400 italic flex items-center justify-center h-full">
    </div>
  </div>
</div>
